<!DOCTYPE html>
<html>
    <head>
        <title> Simple Calendar</title>
        <meta charset="utf-8">
        <meta name="Author" content="José Pedro">
        <meta name="Description" content="conteudo, inicio">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link href="./style.css" rel="stylesheet">
    </head>
    <body>
        <header>
            <h1>Simple Calendar</h1>
            <p class="name-creator">by: <a href="https://github.com/jspedrovicente">José Vicente :)</a></p>
            
        </header>
        <div class="form-year-month">
                <label for="start">Choose the Month and Year:</label>
                <form>
                <input type="month" id="start" name="start"
                 min="1990-03" value="2022-01" onchange=createCalendar(value)>
            
        </div>

        <section class="section-info">   
            <p class= "result">
                To start, simply choose your date above! =)
            </p>
            <p class="days-month">
                **MAKE IT QUICK!**
            </p>
        </section>
        
        <section id="section-calendar" class= "section-calendar invisible">

            <div class="calendar-title"></div>
            <div class="calendar-week">
                <div class="calendar-week-days">Sunday</div>
                <div class="calendar-week-days">Monday</div>
                <div class="calendar-week-days">Tuesday</div>
                <div class="calendar-week-days">Wednesday</div>
                <div class="calendar-week-days">Thursday</div>
                <div class="calendar-week-days">Friday</div>
                <div class="calendar-week-days">Saturday</div>

            </div>
            <div id= "calendar-wrap" class="calendar-wrap">
                <div id="calendar-day" class="calendar-day first-row">
                    <div class="calendar-day-number1 calendar-day-number"></div>
                </div>
                <div class="calendar-day">                    
                    <div class="calendar-day-number2 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number3 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number4 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number5 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number6 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number7 calendar-day-number"></div>
                </div>
                <div class="calendar-day first-row">
                    <div class="calendar-day-number8 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number9 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number10 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number11 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number12 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number13 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number14 calendar-day-number"></div>
                </div>
                <div class="calendar-day first-row">
                    <div class="calendar-day-number15 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number16 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number17 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number18 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number19 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number20 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number21 calendar-day-number"></div>
                </div>
                <div class="calendar-day first-row">
                    <div class="calendar-day-number22 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number23 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number24 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number25 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number26 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number27 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number28 calendar-day-number"></div>
                </div>
                <div class="calendar-day first-row">
                    <div class="calendar-day-number29 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number30 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number31 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number32 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number33 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number34 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number35 calendar-day-number"></div>
                </div>
                <div class="calendar-day first-row last-line-first-row">
                    <div class="calendar-day-number36 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number37 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number38 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number39 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number40 calendar-day-number"></div>
                </div>
                <div class="calendar-day">
                    <div class="calendar-day-number41 calendar-day-number"></div>
                </div>
                <div class="calendar-day last-line-last-row">
                    <div class="calendar-day-number42 calendar-day-number"></div>
                </div>
            </div>
        </section>
        <script>
            function convertMonthNumbertoString(arrayYear, arrayMonth){
                const date = new Date(arrayYear, arrayMonth-1, 1);
                const month = date.toLocaleString('en-us', { month: 'long' });
                return month;
                }
            

            // function cloneTemplate(){

            //     const section = document.getElementById('section-calendar');
            //     const sectionclone = section.cloneNode(true);
            //     sectionclone.id = 'section-clone';
            //     document.body.appendChild(sectionclone);

            //     const wrap = document.getElementById('calendar-wrap');
            //     const wrapclone = wrap.cloneNode(false);
            //     wrapclone.id = 'wrap-clone';
            //     document.getElementById('section-clone').appendChild(wrapclone);
                
            //     for(i = 1; i<42; i++){
            //         const item = document.getElementById('calendar-day');
            //         const clone = item.cloneNode(false);
            //         clone.id = 'calendar-day' + i;
            //         clone.classList = 'calendar-day';
            //         document.getElementById('wrap-clone').appendChild(clone);
            //     }
            // }


            function createCalendar(fulldate){
                var str = fulldate;
                var splitdate = str.split('-', 2);
                arrayYear = splitdate.slice(0, 1);
                arrayMonth = splitdate.slice(1, 2);
                arrayMonth = parseInt(arrayMonth);

                var today = new Date();
                var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();

                document.querySelector('.result').innerHTML = `You have choosen: ${arrayYear} of ${convertMonthNumbertoString(arrayYear, arrayMonth)} at ${time}`;

                document.querySelector('.days-month').innerHTML = `This month contains: ${amountofDaysInMonth(arrayMonth, arrayYear)} days.`;

                var currentdayofweek = currentDayOfWeek(arrayMonth, arrayYear);
                var amountofdaysinmonth = amountofDaysInMonth(arrayMonth, arrayYear);

                document.querySelector('.section-calendar').classList.remove('invisible');
                // cloneTemplate();
                clearCalendar();
                alterCalendar(currentdayofweek, amountofdaysinmonth);
            }

            function amountofDaysInMonth(arrayMonth, arrayYear){
                return new Date(arrayYear, arrayMonth, 0).getDate();
            }
            
            function currentDayOfWeek(arrayMonth, arrayYear){
                return new Date(arrayYear, arrayMonth-1, 1).getDay();
            }

            function alterCalendar(currentdayofweek, amountofdaysinmonth){
                for(day = 1, i = currentdayofweek + 1; day <= amountofdaysinmonth; i++, day++){
                    var determinedDate = document.querySelector('.calendar-day-number' + i);
                    determinedDate.classList.remove('invisible');
                    determinedDate.innerHTML = " " + day;
                    determinedDate.parentNode.classList.remove('gray-background');
                }

                document.querySelector('.calendar-title').innerHTML = convertMonthNumbertoString(arrayYear, arrayMonth);
                }

            function clearCalendar(){
                for(i = 1; i<= 42; i++){
                    var determinedDate = document.querySelector('.calendar-day-number' + i);
                    determinedDate.classList.add('invisible');
                    determinedDate.parentNode.classList.add('gray-background');
                    determinedDate.innerHTML = "";
                }

            }

        </script>
    </body>
</html>